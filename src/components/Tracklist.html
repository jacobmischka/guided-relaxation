<div class="tracklist">
	<h2>
		<a href="/tracklists/{{id}}">
			{{name}}
		</a>
	</h2>

	<nav>
		<ul>
			{{#each tracks as track}}
				<li>
					<a class="track-link"
							href="/tracklists/{{id}}/track/{{track.id}}">
						{{track.name}}
					</a>
					<a class="download-link" href="{{track.path}}"
							download="{{basename(track.path)}}">
						<FeatherIcon icon="download" />
					</a>
				</li>
			{{/each}}
		</ul>
	</nav>
</div>

<style>
	.tracklist {
		box-sizing: border-box;
		flex-grow: 1;
		flex-shrink: 1;
		flex-basis: 0;
		margin: 0 auto;
		padding: 1em;
		width: 100%;
		max-width: 600px;
		min-width: 300px;
	}

	@media (min-width: 768px) {
		.tracklist {
			margin: 2em;
		}
	}

	h2 {
		min-height: 2.5em;
	}

	a {
		text-decoration: none;
	}

	a, a:visited {
		color: white;
	}

	a:hover {
		text-decoration: underline;
	}

	ul {
		width: auto;
		list-style-type: none;
		padding: 0;
	}

	li {
		position: relative;
		border: 1px solid rgba(255, 255, 255, 0.75);
	}

	li:hover {
		background-color: rgba(255, 255, 255, 0.15);
	}

	li ~ li {
		border-top: none;
	}

	li:first-child {
		border-top-left-radius: 4px;
		border-top-right-radius: 4px;
	}

	li:last-child {
		border-bottom: 1px solid rgba(255, 255, 255, 0.75);
		border-bottom-left-radius: 4px;
		border-bottom-right-radius: 4px;
	}

	.track-link {
		display: block;
		padding: 1em;
		padding-right: 3em;
	}

	.track-link:hover {
		text-decoration: none;
	}

	.download-link {
		cursor: pointer;
		position: absolute;
		padding: 1em;
		right: 0;
		top: 0;
		opacity: 0;
	}

	li:hover .download-link {
		opacity: 0.45;
	}

	li:hover .download-link:hover {
		opacity: 0.8;
	}

	.download-link :global(.feather) {
		height: 1em;
	}
</style>

<script>
	import FeatherIcon from 'svelte-feather-icon';

	export default {
		helpers: {
			basename(path) {
				const pieces = path.split('/');
				return pieces[pieces.length - 1];
			}
		},
		components: {
			FeatherIcon
		}
	};
</script>
